<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8" />
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no" />
<meta name="description" content="" />
<meta name="author" content="" />
<title>캠핑사이트 - Camper</title>
<!-- Favicon-->
<link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
<!-- Font Awesome icons (free version)-->
<script src="https://use.fontawesome.com/releases/v6.1.0/js/all.js"
	crossorigin="anonymous"></script>
<!-- Google fonts-->
<link href="https://fonts.googleapis.com/css?family=Montserrat:400,700"
	rel="stylesheet" type="text/css" />
<link
	href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700"
	rel="stylesheet" type="text/css" />
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link
	href="https://fonts.googleapis.com/css2?family=Black+Han+Sans&family=Jua&family=Water+Brush&family=Raleway&family=Cute+Font&display=swap"
	rel="stylesheet">
<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"
	integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW"
	crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<link href="/css/sk_detail.css" rel="stylesheet" />
<link rel="stylesheet" href="/css/korea.css" />
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@9"></script>

<style>
.swal2-modal{
    width:600px !important;
}
</style>
</head>
<body onselectstart="return false" id="page-top">
	<!-- Navigation-->
		<th:block th:replace="fragment/mainheader :: headerFragment"></th:block>
	<div class="camp_bg" th:text="${data[0].facltnm}"></div>
	<div class="container">
		 <button type="button" style="background-color:black; float:right;" onclick="authCheck()">오류 정정</button>
		 
	</div>
	<div class="container">
		<div class="sub_layout layout">
			<article>
				<header class="camp_top_info">
					<h2 class="skip" style="height: 10px;"></h2>
					<div class="camp_info_box">
						<div class="img_b" th:if="${data[0].firstimageurl} != 'no data'">
							<img class="img_c" th:src="${data[0].firstimageurl}"></img>
						</div>
						<div class="img_b"
							th:unless="${data[0].firstimageurl} != 'no data'">
							<img class="img_c" src="/images/camp3.jpg"></img>
						</div>
						<!--//S:table-->
						<div class="cont_tb">
							<table class="table">
								<colgroup>
									<col style="width: 30%;">
									<col style="width: 70%;">
								</colgroup>
								<tbody>
									<tr>
										<th scope="col">주소</th>
										<td th:text="${data[0].addr1}"></td>
									</tr>
									<tr class="camp_call_pcVer">
										<th scope="col">전화번호</th>
										<td th:text="${data[0].tel}"></td>
									</tr>
									<tr>
										<th scope="col">운영 상태</th>
										<td th:text="${data[0].managesttus}"></td>
									</tr>
									<tr>
										<th scope="col">캠핑장 유형</th>
										<td th:text="${data[0].induty}"></td>
									</tr>
									<tr>
										<th scope="col">입지 구분</th>
										<td th:text="${data[0].lctcl}"></td>
									</tr>
									<tr>
										<th scope="col">예약방법</th>
										<td th:text="${data[0].resvecl}"></td>
									</tr>
									<tr>
										<th scope="col">홈페이지</th>
										<td><a th:text="${data[0].homepage}"
											th:href="${data[0].homepage}" target='_blank'></a></td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
					<div class="intro" style="height: auto; background-color: #f9f9f9;" >
						<p th:if="${data[0].intro} != 'no data'"
							th:text="${data[0].intro}"></p>
						<p th:unless="${data[0].intro} != 'no data'"
							style='text-align: center;'></p>
					</div>
					<div class="campOption"
						style="height: auto; background-color: #f9f9f9; padding-bottom: 20px;">
						<div style="width: 100%; height: 30px;"></div>
						<!-- 해당 값을 포함하고 있는지 확인 후 값이 있다면 해당 아이콘 출력 (contains 함수)-->
						<div class="iconDiv">
							<img th:if="${#strings.contains({data[0].sbrscl},'전기')}"
								class="campOptionicon" src="../images/options/bolt.png" alt="전기"
								style="width: 50px; height: 50px;" />
							<img th:unless="${#strings.contains({data[0].sbrscl},'전기')}"
								class="campOptionicon" src="../images/options/bolt.png" alt="전기"
								style="width: 50px; height: 50px; opacity:0.1;" />
							<p th:if="${#strings.contains({data[0].sbrscl},'전기')}">전기</p>
							<p th:unless="${#strings.contains({data[0].sbrscl},'전기')}" style="opacity:0.1;">전기</p>
						</div>
						<div class="iconDiv">
							<img th:if="${#strings.contains({data[0].sbrscl},'무선인터넷')}"
								class="campOptionicon" src="../images/options/wifi.png"
								style="width: 50px; height: 50px;" />
								<img th:unless="${#strings.contains({data[0].sbrscl},'무선인터넷')}"
								class="campOptionicon" src="../images/options/wifi.png" alt="무선인터넷"
								style="width: 50px; height: 50px; opacity:0.1;" />
							<p th:if="${#strings.contains({data[0].sbrscl},'무선인터넷')}">무선인터넷</p>
							<p th:unless="${#strings.contains({data[0].sbrscl},'무선인터넷')}" style="opacity:0.1;">무선인터넷</p>
							
						</div>
						<div class="iconDiv">
							<img th:if="${#strings.contains({data[0].sbrscl},'장작판매')}"
								class="campOptionicon" src="../images/options/firewood.png"
								style="width: 50px; height: 50px;" />
							<img th:unless="${#strings.contains({data[0].sbrscl},'장작판매')}"
								class="campOptionicon" src="../images/options/firewood.png" alt="장작판매"
								style="width: 50px; height: 50px; opacity:0.1;" />
							
							<p th:if="${#strings.contains({data[0].sbrscl},'장작판매')}">장작판매</p>
							<p th:unless="${#strings.contains({data[0].sbrscl},'장작판매')}" style="opacity:0.1;">장작판매</p>
						</div>
						<div class="iconDiv">
							<img th:if="${#strings.contains({data[0].sbrscl},'온수')}"
								class="campOptionicon" src="../images/options/water.png"
								style="width: 50px; height: 50px;" />
								<img th:unless="${#strings.contains({data[0].sbrscl},'온수')}"
								class="campOptionicon" src="../images/options/water.png" alt="온수"
								style="width: 50px; height: 50px; opacity:0.1;" />
							
							<p th:if="${#strings.contains({data[0].sbrscl},'온수')}">온수</p>
							<p th:unless="${#strings.contains({data[0].sbrscl},'온수')}" style="opacity:0.1;">온수</p>
						</div>
						<div class="iconDiv">
							<img th:if="${#strings.contains({data[0].sbrscl},'마트.편의점')}"
								class="campOptionicon" src="../images/options/market.png"
								style="width: 50px; height: 50px;" />
								<img th:unless="${#strings.contains({data[0].sbrscl},'마트.편의점')}"
								class="campOptionicon" src="../images/options/market.png" alt="마트.편의점"
								style="width: 50px; height: 50px; opacity:0.1;" />
							<p th:if="${#strings.contains({data[0].sbrscl},'마트.편의점')}">마트,편의점</p>
							<p th:unless="${#strings.contains({data[0].sbrscl},'마트.편의점')}" style="opacity:0.1;">마트,편의점</p>
						</div>
						<div class="iconDiv">
							<img th:if="${#strings.contains({data[0].sbrscl},'트렘폴린')}"
								class="campOptionicon" src="../images/options/trampoline.png"
								style="width: 50px; height: 50px;" />
								<img th:unless="${#strings.contains({data[0].sbrscl},'트렘폴린')}"
								class="campOptionicon" src="../images/options/trampoline.png" alt="트렘폴린"
								style="width: 50px; height: 50px; opacity:0.1;" />
							<p th:if="${#strings.contains({data[0].sbrscl},'트렘폴린')}">트램펄린</p>
							<p th:unless="${#strings.contains({data[0].sbrscl},'트렘폴린')}" style="opacity:0.1;">트램펄린</p>
						</div>
						<div class="iconDiv">
							<img th:if="${#strings.contains({data[0].sbrscl},'물놀이장')}"
								class="campOptionicon" src="../images/options/swimming pool.png"
								style="width: 50px; height: 50px;" />
								<img th:unless="${#strings.contains({data[0].sbrscl},'물놀이장')}"
								class="campOptionicon" src="../images/options/swimming pool.png" alt="물놀이장"
								style="width: 50px; height: 50px; opacity:0.1;" />
							<p th:if="${#strings.contains({data[0].sbrscl},'물놀이장')}">물놀이장</p>
							<p th:unless="${#strings.contains({data[0].sbrscl},'물놀이장')}" style="opacity:0.1;">물놀이장</p>
						</div>
						<div class="iconDiv">
							<img th:if="${#strings.contains({data[0].sbrscl},'운동시설')}"
								class="campOptionicon" src="../images/options/sport.png"
								style="width: 50px; height: 50px;" />
								<img th:unless="${#strings.contains({data[0].sbrscl},'운동시설')}"
								class="campOptionicon" src="../images/options/sport.png" alt="운동시설"
								style="width: 50px; height: 50px; opacity:0.1;" />
							<p th:if="${#strings.contains({data[0].sbrscl},'운동시설')}">운동시설</p>
							<p th:unless="${#strings.contains({data[0].sbrscl},'운동시설')}" style="opacity:0.1;">운동시설</p>
						</div>
						<div class="iconDiv">
							<img th:if="${#strings.contains({data[0].sbrscl},'산책로')}"
								class="campOptionicon" src="../images/options/trail.png"
								style="width: 50px; height: 50px;" />
								<img th:unless="${#strings.contains({data[0].sbrscl},'산책로')}"
								class="campOptionicon" src="../images/options/trail.png" alt="산책로"
								style="width: 50px; height: 50px; opacity:0.1;" />
							<p th:if="${#strings.contains({data[0].sbrscl},'산책로')}">산책로</p>
							<p th:unless="${#strings.contains({data[0].sbrscl},'산책로')}" style="opacity:0.1;">산책로</p>
						</div>
						<div class="iconDiv">
							<img th:if="${#strings.contains({data[0].sbrscl},'놀이터')}"
								class="campOptionicon" src="../images/options/noriter.png"
								style="width: 50px; height: 50px;" />
								<img th:unless="${#strings.contains({data[0].sbrscl},'놀이터')}"
								class="campOptionicon" src="../images/options/noriter.png" alt="놀이터"
								style="width: 50px; height: 50px; opacity:0.1;" />
							<p th:if="${#strings.contains({data[0].sbrscl},'놀이터')}">놀이터</p>
							<p th:unless="${#strings.contains({data[0].sbrscl},'놀이터')}" style="opacity:0.1;">놀이터</p>
						</div>
						<div class="iconDiv">
							<img th:if="${#strings.contains({data[0].sbrscl},'운동장')}"
								class="campOptionicon" src="../images/options/playground.png"
								style="width: 50px; height: 50px;" />
								<img th:unless="${#strings.contains({data[0].sbrscl},'운동장')}"
								class="campOptionicon" src="../images/options/playground.png" alt="운동장"
								style="width: 50px; height: 50px; opacity:0.1;" />
							<p th:if="${#strings.contains({data[0].sbrscl},'운동장')}">운동장</p>
							<p th:unless="${#strings.contains({data[0].sbrscl},'운동장')}" style="opacity:0.1;">운동장</p>
						</div>
						<div class="iconDiv">
							 <img th:if="|${(data[0].animalcmgcl).toString().equals('불가능')}|"	class="campOptionicon" src="../images/options/animal.png"
								style="width: 50px; height: 50px; opacity:0.1;" />
							 <img th:if="|${(data[0].animalcmgcl).toString().equals('가능')}|"	class="campOptionicon" src="../images/options/animal.png"
								style="width: 50px; height: 50px; opacity:1;" />
							 <img th:if="|${(data[0].animalcmgcl).toString().equals('가능(소형견)')}|"	class="campOptionicon" src="../images/options/animal.png"
								style="width: 50px; height: 50px; opacity:0.5;"/>
								
								<p th:if="|${(data[0].animalcmgcl).toString().equals('불가능')}|" th:text="${data[0].animalcmgcl}" style="opacity:0.1;"></p>
								<p th:if="|${(data[0].animalcmgcl).toString().equals('가능')}|" th:text="${data[0].animalcmgcl}" style="opacity:1;"></p>
								<p th:if="|${(data[0].animalcmgcl).toString().equals('가능(소형견)')}|" th:text="${data[0].animalcmgcl}" style="opacity:0.5;"></p>
						</div>
					</div>
				</header>
			</article>
		</div>
		<hr th:if="${gall[0] != 'x'}" style="height: 5px;">
		<h1 th:if="${gall[0] != 'x'}" style="margin-top: 30px;">갤러리</h1>
	</div>
	<div class="grid-container container" th:if="${gall[0] != 'x'}"
		style="height: 600px;">
		<h1></h1>
		<div class="item1 modal-gall" data-index="0" data-bs-toggle="modal"
			data-bs-target="#campmodal" th:if="${gall[0] != 'x'}"
			th:data-img="${gall[0]}" th:value="${gall[0]}"
			th:style="|background-image:url(${gall[0]})|"></div>
		<div class="item2 modal-gall" data-index="1" data-bs-toggle="modal"
			data-bs-target="#campmodal" th:if="${gall[1] != 'x'}"
			th:data-img="${gall[1]}" th:value="${gall[1]}"
			th:style="|background-image:url(${gall[1]})|"></div>
		<div class="item3 modal-gall" data-index="2" data-bs-toggle="modal"
			data-bs-target="#campmodal" th:if="${gall[2] != 'x'}"
			th:data-img="${gall[2]}" th:value="${gall[2]}"
			th:style="|background-image:url(${gall[2]})|"></div>
		<div class="item4 modal-gall" data-index="3" data-bs-toggle="modal"
			data-bs-target="#campmodal" th:if="${gall[3] != 'x'}"
			th:data-img="${gall[3]}" th:value="${gall[3]}"
			th:style="|background-image:url(${gall[3]})|"></div>
		<div class="item5 modal-gall" th:if="${gall[4] != 'x'}"
			th:style="|background-image:linear-gradient(
        rgba(0, 0, 0, 0.7),
        rgba(0, 0, 0, 0.7)
      ), url(${gall[4]}); 
	background-size: cover;
	color:white;
	bottom:0;
	right:0;
	text-align:center;
	vertical-align:middle;
	line-height:260px;|" data-bs-toggle="modal"
				data-bs-target="#campmodal" data-index="4" th:data-img="${gall[4]}"
				 th:text="|+${#lists.size(gall)-4}|">
		</div>
	
	
	</div>
		
		<div class="container weathercon">
			<div style=" width:95%; padding: 0px 0px 0px 30px;">
			<div style="width:450px; margin-left:40px;">
			<div class="inblock">
					<!-- 날씨 아이콘 -->
					<img style="width:150px;height:150px;" th:src="|../images/weathericon/${weather.weather[0].icon}.png|"></img>
			</div>	
			<div class="inblock" style="margin-left: 30px; vertical-align: top; margin-top: 1px;">
			<!-- 도시 이름 -->
				<h5 style="margin-top:30px;"th:text="|${data[0].donm} ${data[0].sigungunm}|"></h5>
			
			<!-- 온도 -->
				<h5 th:text="|${#numbers.formatInteger((weather.main.temp- 273.15),2, 'COMMA')}°C|"></h5>
			<!--  날씨 매개변수 그룹 (비, 바람 등) 
				<h2 style="margin-top: 30px;" th:text="${weather.weather[0].main}"></h2> -->
			<!-- 날씨  -->
				<h5 th:text="${weather.weather[0].description}"></h5>
			</div>
			<div class="inblock" style="vertical-align: top; margin-left: 30px; margin-top: 30px;">
				<!-- 풍속 -->
				<h5 th:text="|${weather.wind.speed}m/s|"></h5>
			<div>
				<!-- 풍향 -->
				<h5 th:if="${#numbers.formatInteger(weather.wind.deg,2,'COMMA')} <= 22 and ${#numbers.formatInteger(weather.wind.deg,2,'COMMA')} > 337 " th:text="북풍" ></h5>
				<h5 th:if="${#numbers.formatInteger(weather.wind.deg,2,'COMMA')} <= 67 and ${#numbers.formatInteger(weather.wind.deg,2,'COMMA')} > 22 " th:text="북동풍" ></h5>
				<h5 th:if="${#numbers.formatInteger(weather.wind.deg,2,'COMMA')} <= 112 and ${#numbers.formatInteger(weather.wind.deg,2,'COMMA')} > 67 " th:text="동풍" ></h5>
				<h5 th:if="${#numbers.formatInteger(weather.wind.deg,2,'COMMA')} <= 157 and ${#numbers.formatInteger(weather.wind.deg,2,'COMMA')} > 112 " th:text="남동풍" ></h5>
				<h5 th:if="${#numbers.formatInteger(weather.wind.deg,2,'COMMA')} <= 202 and ${#numbers.formatInteger(weather.wind.deg,2,'COMMA')} > 157 " th:text="남풍" ></h5>
				<h5 th:if="${#numbers.formatInteger(weather.wind.deg,2,'COMMA')} <= 247 and ${#numbers.formatInteger(weather.wind.deg,2,'COMMA')} > 202 " th:text="남서풍" ></h5>
				<h5 th:if="${#numbers.formatInteger(weather.wind.deg,2,'COMMA')} <= 292 and ${#numbers.formatInteger(weather.wind.deg,2,'COMMA')} > 247 " th:text="서풍" ></h5>
				<h5 th:if="${#numbers.formatInteger(weather.wind.deg,2,'COMMA')} <= 337 and ${#numbers.formatInteger(weather.wind.deg,2,'COMMA')} > 292 " th:text="북서풍" ></h5>
			</div>
				<div>	
					<img style="margin-left: 30px;" src="../images/windarrow.png" th:style="|transform: rotate( ${weather.wind.deg}deg ); width:35px; height:35px;|"></img>
				</div>
			</div>
		</div>
		<hr>
		<h4 th:if="${!((data[0].gnrlsiteco).toString().equals('0') and (data[0].autositeco).toString().equals('0') and (data[0].glampsiteco).toString().equals('0') and (data[0].caravsiteco).toString().equals('0'))}" style="margin-top:10px;">주요 시설</h4>
		<div style="margin-bottom:10px;">		
			<span th:if="${data[0].gnrlsiteco} != '0'" th:text="|일반 야영장(${data[0].gnrlsiteco}면)|"></span>
			<span th:if="${data[0].autositeco} != '0'" th:text="|자동차 야영장(${data[0].autositeco}면)|"></span>
			<span th:if="${data[0].glampsiteco} != '0'" th:text="|글램핑장(${data[0].glampsiteco}면)|"></span>
			<span th:if="${data[0].caravsiteco} != '0'" th:text="|카라반(${data[0].caravsiteco}면)|"></span>
		</div>
	<div style="margin-bottom:10px;" th:if="${!(data[0].sitedstnc).toString().equals('0')}">
		<h4>사이트 간격</h4>
		<span  th:text="|${data[0].sitedstnc} 미터|"></span>
	</div>
	<div class="sitetable" style="margin-bottom:10px;">
	<h4>사이트 정보</h4>
	<table style="text-align:center; border-collapse: unset;">
		<tbody>
		<tr>
			<th class="backslash" style="width:85px;"></th>
			<td style="width:150px;">사이트 가로 크기</td>
			<td style="width:150px;">사이트 세로 크기</td>
			<td style="width:120px;">사이트 수량</td>
		</tr>
		<tr th:if="${data[0].sitemg1width} ">
			<td>site 1</td>
			<td th:text="${data[0].sitemg1width}"></td>
			<td th:text="${data[0].sitemg1vrticl}"></td>
			<td th:text="${data[0].sitemg1co}"></td>
		</tr>
		<tr>
			<td>site 2</td>
			<td th:text="${data[0].sitemg2width}"></td>
			<td th:text="${data[0].sitemg2vrticl}"></td>
			<td th:text="${data[0].sitemg2co}"></td>
		</tr>
		<tr>
			<td>site 3</td>
			<td th:text="${data[0].sitemg3width}"></td>
			<td th:text="${data[0].sitemg3vrticl}"></td>
			<td th:text="${data[0].sitemg3co}"></td>
		</tr>
		</tbody>
	</table>
	</div>
	<div style="margin-bottom:10px;">
	<h4 th:if="${!((data[0].sitebottomcl1).toString().equals('0') and (data[0].sitebottomcl2).toString().equals('0') and (data[0].sitebottomcl3).toString().equals('0') and (data[0].sitebottomcl4).toString().equals('0') and (data[0].sitebottomcl5).toString().equals('0'))}">사이트 바닥 정보</h4>
		<span th:if="${data[0].sitebottomcl1} != '0'" th:text="|잔디(${data[0].sitebottomcl1})|"></span>
		<span th:if="${data[0].sitebottomcl2} != '0'" th:text="|파쇄석(${data[0].sitebottomcl2})|"></span>
		<span th:if="${data[0].sitebottomcl3} != '0'" th:text="|데크(${data[0].sitebottomcl3})|"></span>
		<span th:if="${data[0].sitebottomcl4} != '0'" th:text="|자갈(${data[0].sitebottomcl4})|"></span>
		<span th:if="${data[0].sitebottomcl5} != '0'" th:text="|맨흙(${data[0].sitebottomcl5})|"></span>
	</div>
	<div>
	<h4 th:if="${!((data[0].toiletco).toString().equals('0') and (data[0].swrmco).toString().equals('0') and (data[0].wtrplco).toString().equals('0'))}">편의 시설 </h4>
	<span th:if="${data[0].toiletco} != '0'" th:text="화장실"></span>
	<span th:if="${data[0].swrmco} != '0'" th:text="샤워실"></span>
	<span th:if="${data[0].wtrplco} != '0'" th:text="개수대"></span>
	</div>
			
	
	
		</div>
		<div class="container">
		 <h2 class="h2review" th:text="리뷰"></h2>
		 <div id="reviewdiv" style="overflow:scroll; overflow-x: hidden; width:100%; height:600px;">
		 <div th:each="b, i : ${blog.blog_title}" style="border:2px solid darkgray;  margin: 10px 10px 10px 0px; box-shadow:5px 5px; cursor:pointer;  border-radius:15px; ">
				<div class="griddiv">
				<div style="margin-inline: 20px; margin-bottom:5px;">
					<p style="margin-bottom:10px;">
					<img th:src="${blog.blog_writer_image[i.index]}"  style="width:35px; height:35px;border-radius:50%; vertical-align: middle;"></img>
					<span th:text="${blog.blog_writer[i.index]}" style="font-size:15px; color:gray"></span> 
					<span th:text="${blog.blog_writer_date[i.index]}" style="font-size:15px; color:darkgray"></span>
					<br>
					</p>
					<a th:href="${blog.blog_url[i.index]}" target='_blank'>
					<span th:text="${b}" style="font-size:20px;"></span><br>
					<span th:text="${blog.blog_content[i.index]}" style="font-size:15px;"></span><br>
					</a>
					</div>
					<div>
						<img th:src="${blog.blog_image[i.index]}" style="border-radius: 0 15px 15px 0px; width:100%; height:100%;"></img>
					</div>
				</div>
				</div>
		</div>
	</div>
</div>
<!-- Footer-->
	<th:block th:replace="fragment/mainfooter :: footerFragment"></th:block>
	<!--  Modal -->
	<div class="modal fade" id="campmodal" tabindex="-1"
		aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered modal-lg">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="btn-close" data-bs-dismiss="modal"
						aria-label="Close"></button>
				</div>
				<div class="modal-body" align="center">
					<div>
						<button type="button" data-bs-toggle="modal"
							data-bs-target="#campmodal" id="btn-pre" class="btn-pre">
							<img id="btn-preimg" src="../images/left-arrow-gray.png"
								style="width: 30px; height: 30px; float: left" alt="">
						</button>
						<img id="imgmodal" src="" alt="없음" class="fs-5" width="80%"
							height="auto">
						<button type="button" data-bs-toggle="modal"
							data-bs-target="#campmodal" id="btn-next1" class="btn-next1">
							<img id="btn-nextimg" src="../images/right-arrow-gray.png"
								style="width: 30px; height: 30px; float: right" alt="">
						</button>
						<span class="modal-title curidx" id="curidx"></span> <span
							class="modal-title">/</span> <span class="modal-title"
							id="maxidx"></span>
					</div>
				</div>
			</div>
		</div>
	</div>
	
		<!-- modal -->
			<div class="modal modallist" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
	      <div class="modal-dialog modal-dialog-centered modal-lg">
					<div class="modal-content2">
						<div class="modal-header" style="color:black;">오류 정정 리스트
							<button type="button" class="btn-close" data-bs-dismiss="modallist"	aria-label="Close"></button>
						</div>
						<table class="modaltable" style="color:black;">
						<tbody>
						</tbody>
						</table>
					</div>
	   	 	</div>
	    </div>

</body>
<script th:inline="javascript">
var images = ([[${gall}]])
var maxidx = images.length;
var id;
var session = ([[${session.user_nickname}]])
var role = ([[${session.user_role}]])
</script>
<script>
const modal = document.querySelector('.modallist');
const btnOpenPopup = document.querySelector('.btn-open-popup');

btnOpenPopup.addEventListener('click', () => {

	modal.style.display = 'block';
	$.ajax({
		url : "error/correction/list",
		type : "post",
		async : false,
		contentType : "application/x-www-form-urlencoded; charset=UTF-8;",
		success : function(data) {
			$('.modaltable >tbody').empty();
			
			var storeAdd1 = '<tr>'+
			'<th scope="col" style="width:15%">번호</th>'+
			'<th scope="col" style="width:45%">제목</th>'+
			'<th scope="col" style="width:15%">작성자</th>'+
			'<th scope="col" style="width:25%">작성 날짜</th>'+
			'</tr>';

  		 $(".modaltable > tbody").append(storeAdd1);
			
			for(var i =0; i< data.data.length; i++){
  				storeAdd = 
  				'<tr class=errortr id='+data.data[i].enumber+' onclick="errorList()">'+
					 "<td>"+(i+1)+"</td>"+
					 "<td>"+data.data[i].etitle+"</td>"+
					 "<td>"+data.data[i].ewriter+"</td>"+
					 "<td>"+data.data[i].ewrite_date+"</td>"+
					 "</tr>";
    		 $(".modaltable > tbody").append(storeAdd);
  			}
		}
});
});
</script>
<script>
const closeBtn = modal.querySelector(".btn-close")
 
closeBtn.addEventListener("click", e => {
modal.style.display = "none"
});

function errorList(){
	$('.errortr').click(function(){
    var id_check = $(this).attr("id");
		if(role == '1'){
	 	$.ajax({
  		url : "error/correction/one",
  		type : "post",
  		async : false,
  		data: {
  			"enumber":id_check
  		},
  		contentType : "application/x-www-form-urlencoded; charset=UTF-8;",
  		success : function(data) {
  			var html =
  				'<div style="text-align:right;margin-top: 15px;"><span>'+data.data[0].ewriter+'</span>'+
  				'<span style="margin-left:10px;">'+data.data[0].ewrite_date+'</span></div>'+
  				'<div style="text-align: start; height: 200px; margin-top: 30px; padding: 20px; border: 2px solid;">'+data.data[0].econtent+'</div>';
  			(async () => {
  		  	const { value: formValues } = await Swal.fire({
  				 title: data.data[0].etitle,
  			   html: html,
  			   allowOutsideClick: false,
  			   closeOnClickOutside:false,// alert 말고 다른거 눌렀을 때 안닫히게
  			   showCancelButton: true, // cancel버튼 보이기. 기본은 원래 없음
  			   confirmButtonColor: '#3085d6', // confrim 버튼 색깔 지정
  			   cancelButtonColor: '#d33', // cancel 버튼 색깔 지정
  			   confirmButtonText: '승인', // confirm 버튼 텍스트 지정
  			   cancelButtonText: '반려', // cancel 버튼 텍스트 지정
  			   reverseButtons: true, // 버튼 순서 거꾸로
  			 	})
  			  if (formValues) {

  			    console.log('123')
  			  	$.ajax({
  			  		url : "error/correction/update",
  			  		type: "post",
  			  		async : false,
  			  		data: {
  			  			"estatus" : '승인',
  			  			"enumber" : data.data[0].enumber
  			  		},
  			  		contentType :"application/x-www-form-urlencoded; charset=UTF-8;",
  			  		success : function(data) {
  			  			Swal.fire({
  			  			   text: '승인되었습니다.'
  			  			})
  			  		}
  			  	})
  			  }
  			  else {	
  			  	$.ajax({
				  		url : "error/correction/update",
				  		type: "post",
				  		async : false,
				  		data: {
				  			"estatus" : '반려',
				  			"enumber" : data.data[0].enumber
				  		},
				  		contentType :"application/x-www-form-urlencoded; charset=UTF-8;",
				  		success : function(data) {
				  			Swal.fire({
			  			   text: '승인되지 않았습니다.'
			  			})
			  		}
			  	})
  			  }
  		  })()
  		 }
  	})
	} else {
		 Swal.fire({
		   icon: 'error',
		   title: 'Oops...',
		   text: '관리자가 아닙니다!'
		 })
	}
	});
}
	//로그인 체크
	function authCheck() {
		if(session){
		  (async () => {
		  	const { value: formValues } = await Swal.fire({
			    title: '오류 정정 신청',
			    html:
			      '<input id="swal-input1" style="width:65%" class="swal2-input" placeholder="제목">' +
			      '<input id="swal-input2" style="width:30%; margin-left:20px;" class="swal2-input"value='+session+'>'+
			      '<input id="swal-input3" style="height:300px;" placeholder="내용" class="swal2-input">',
			    focusConfirm: false,
			    preConfirm: () => {
			      return {
			        "etitle" : document.getElementById('swal-input1').value,
			        "ewriter" :document.getElementById('swal-input2').value,
			        "econtent" : document.getElementById('swal-input3').value
			      }
			    }
			  })
			  if (formValues) {
			  	if(formValues.etitle == '') {
			  		 Swal.fire({
			  			 icon:'error',
		  			   text: '제목을 입력해주세요.'
		  			 })
			  	}
			  	if(formValues.etitle.length > 20) {
			  		 Swal.fire({
			  			 icon:'error',
		  			   text: '제목 글자 수가 20자를 초과했습니다.'
		  			 })
			  	}
			  	if(formValues.econtent.length > 50) {
			  		 Swal.fire({
			  			 icon:'error',
		  			   text: '내용 글자 수가 50자를 초과했습니다.'
		  			 })
			  	}
			  	else if(formValues.econtent == ''){
			  		 Swal.fire({
			  			 icon:'error',
		  			   text: '내용을 입력해주세요.'
		  			 })
			  	}
			  	else {
			  		$.ajax({
				  		url : "/error/correction",
				  		type : "post",
				  		async : false,
				  		data : {
				  			etitle : formValues.etitle,
				  			econtent : formValues.econtent,
				  			ewriter : formValues.ewriter,
				  		},
				  		contentType : "application/x-www-form-urlencoded; charset=UTF-8;",
				  		success : function(data) {
				  			 Swal.fire({
				  			   icon: 'success',
				  			   title: 'Yes!',
				  			   text: '성공'
				  			 })
				  		}
				  	}) 
				  }
			  }
		  })()
		} else {
			 Swal.fire({
			   icon: 'error',
			   title: 'Oops...',
			   text: '로그인이 필요합니다!'
			 })
		}
	}

	//모달 듸울 때 데이터 불러오는 부분
	$('#campmodal').on('show.bs.modal', (e)=> {
		var target = e.relatedTarget.dataset;
		id = target.index
		if(id != 0){
			$('.btn-pre').attr('disabled', false);
 		  $("#btn-preimg").attr("src", "/images/left-arrow-gray.png");
 			$('.btn-next1').attr('disabled', false);
 		 $("#btn-nextimg").attr("src", "/images/right-arrow-gray.png");
		}
 		if(id == 0) {
			$('.btn-pre').attr('disabled', true);
			$("#btn-preimg").attr("src", "/images/left-arrow-white.png");
 			$('.btn-next1').attr('disabled', false);
 		 $("#btn-nextimg").attr("src", "/images/right-arrow-gray.png");
		}
 		$("#imgmodal").attr('src', images[id]);
		$('#curidx').text(Number(id)+Number(1))
		$('#maxidx').text(maxidx)
	})
	
	//모달 이전 버튼
	$('.btn-pre').on('click', function(e) {
		id--;
		render(id)
	});
	//모달 다음 버튼
	$('.btn-next1').on('click', function(e) {

		id++;
		render(id)
	}); 
	
	//모달 버튼 이벤트 처리
	function render(idx) {
		 // total : 1/21, idx+1 // images.length
		 // img 경로 변경
		if(idx != 0){
			$('.btn-pre').attr('disabled', false);
			$("#btn-preimg").attr("src", "/images/left-arrow-gray.png");
		}
		if(idx == 0) {
			$('.btn-pre').attr('disabled', true);
			$("#btn-preimg").attr("src", "/images/left-arrow-white.png");
		}
		if(idx+1 != maxidx){
			$('.btn-next1').attr('disabled', false);
			$("#btn-nextimg").attr("src", "/images/right-arrow-gray.png");
		}
		if(idx+1 == maxidx) {
			$('.btn-next1').attr('disabled', true);
			$("#btn-nextimg").attr("src", "/images/right-arrow-white.png");
		}
	  $("#imgmodal").attr('src', images[idx]);
	  $('#curidx').text(Number(idx+1))
	  $('#maxidx').text(maxidx)
	 }

 
 
 </script>
</html>



