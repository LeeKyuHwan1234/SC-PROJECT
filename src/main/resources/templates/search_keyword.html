<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8" />
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no" />
<meta name="description" content="" />
<meta name="author" content="" />
<title>캠핑사이트 - Camper</title>
<!-- Favicon-->
<link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
<!-- Font Awesome icons (free version)-->
<script src="https://use.fontawesome.com/releases/v6.1.0/js/all.js"
	crossorigin="anonymous"></script>
<!-- Google fonts-->
<link href="https://fonts.googleapis.com/css?family=Montserrat:400,700"
	rel="stylesheet" type="text/css" />
<link
	href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700"
	rel="stylesheet" type="text/css" />
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Black+Han+Sans&family=Jua&family=Water+Brush&family=Raleway&family=Cute+Font&display=swap" rel="stylesheet">
<link href="/css/header.css" rel="stylesheet" />
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@9"></script>
</head>
<body  onselectstart="return false" id="page-top" style="overflow:hidden;">
	<!-- Navigation-->
		<th:block th:replace="fragment/mainheader :: headerFragment"></th:block>
		<!-- Masthead-->
		<header class="masthead">
			<div class="container">
				<div class="masthead-subheading" style="margin-top:50px;">Where should  we  go  this  time?</div>
				<form action="camp" method="post" name="searchform">
					<div class="masthead-heading text-uppercase" style="margin-top:100px;">
						<input type="text" id="craw_id" name="searchKeyword" placeholder="캠핑장 이름, 주소" style="font-size:20px; margin:0; background-color:lightcyan;"/>
						<span style="font-size:25px; cursor:pointer" id="offDisplay">상세조건 <i class="fa-solid fa-square-plus"style="width:25px; height:25px;"></i></span>
						</div>
					</form>
					<form action="camp2" method="post" id="searchform2" name="searchform2" style="display:none;">
				<div id="selectOption" style="text-align:left;justify-content: center;background-color:lightgray;opacity:70%; border-radius:30px; color:black;display: inline-flex;">
				<ul>
				<li>
					<div class="folder_w">
						<div class="check_w"><h5>▣ 지역은 반드시 하나 이상 선택해야 합니다.</h5>	
						<strong>지역별 <input type='checkbox' name='docheck' value='selectall1' onclick='doselectAll(this)'/></strong>
								<ul style="display: -webkit-inline-box;margin-left: 0; " >
									<li><input type="checkbox" name="docheck" id="c_do1" value="서울시" ><label for="c_do1">서울시</label></li>
									<li><input type="checkbox" name="docheck" id="c_do2" value="부산시"><label for="c_do2">부산시</label></li>
									<li><input type="checkbox" name="docheck" id="c_do3" value="대구시"><label for="c_do3">대구시</label></li>
									<li><input type="checkbox" name="docheck" id="c_do4" value="인천시"><label for="c_do4">인천시</label></li>
									<li><input type="checkbox" name="docheck" id="c_do5" value="광주시"><label for="c_do5">광주시</label></li>
									<li><input type="checkbox" name="docheck" id="c_do6" value="대전시"><label for="c_do6">대전시</label></li>
									<li><input type="checkbox" name="docheck" id="c_do7" value="울산시"><label for="c_do7">울산시</label></li>
									<li><input type="checkbox" name="docheck" id="c_do8" value="세종시"><label for="c_do8">세종시</label></li>
									<li><input type="checkbox" name="docheck" id="c_do9" value="경기도"><label for="c_do9">경기도</label></li>
								</ul>
								<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
								<ul style="display: -webkit-inline-box;margin-left: 50px;">
									<li><input type="checkbox" name="docheck" id="c_do10" value="강원도"><label for="c_do10">강원도</label></li>
									<li><input type="checkbox" name="docheck" id="c_do11" value="충청북도"><label for="c_do11">충청북도</label></li>
									<li><input type="checkbox" name="docheck" id="c_do12" value="충청남도"><label for="c_do12">충청남도</label></li>
									<li><input type="checkbox" name="docheck" id="c_do13" value="전라북도"><label for="c_do13">전라북도</label></li>
									<li><input type="checkbox" name="docheck" id="c_do14" value="전라남도"><label for="c_do14">전라남도</label></li>
									<li><input type="checkbox" name="docheck" id="c_do15" value="경상북도"><label for="c_do15">경상북도</label></li>
									<li><input type="checkbox" name="docheck" id="c_do16" value="경상남도"><label for="c_do16">경상남도</label></li>
									<li><input type="checkbox" name="docheck" id="c_do17" value="제주도"><label for="c_do17">제주도</label></li>
								</ul>
						</div>
					</div>
					
				</li>
					
				<li>
					<div class="folder_w" style="display: inline-block;">
						<div class="check_w">
						<strong>입지 구분 <input type='checkbox' name='lccheck' value='selectall2' onclick='lcselectAll(this)'/></strong>
								<ul style="display: -webkit-inline-box; margin-left:0;">
									<li><input type="checkbox" name="lccheck" id="c_lc01" value="강"><label for="c_lc01">강</label></li>
									<li><input type="checkbox" name="lccheck" id="c_lc02" value="계곡"><label for="c_lc02">계곡</label></li>
									<li><input type="checkbox" name="lccheck" id="c_lc03" value="도심"><label for="c_lc03">도심</label></li>
									<li><input type="checkbox" name="lccheck" id="c_lc04" value="산"><label for="c_lc04">산</label></li>
									<li><input type="checkbox" name="lccheck" id="c_lc05" value="섬"><label for="c_lc05">섬</label></li>
									<li><input type="checkbox" name="lccheck" id="c_lc06" value="숲"><label for="c_lc06">숲</label></li>
									<li><input type="checkbox" name="lccheck" id="c_lc07" value="호수"><label for="c_lc07">호수</label></li>
									<li><input type="checkbox" name="lccheck" id="c_lc08" value="해변"><label for="c_lc08">해변</label></li>
								</ul>
						</div>
					</div>
				</li>
				<li>
					<div class="folder_w" style="display: inline-block;">
						<div class="check_w">
						<strong>주요 시설 <input type='checkbox' name='incheck' value='selectall3' onclick='inselectAll(this)'/></strong>
								<ul style="display: -webkit-inline-box; margin-left:0;">
									<li><input type="checkbox" name="incheck" id="c_in01" value="일반야영장"><label for="c_in01">일반야영장</label></li>
									<li><input type="checkbox" name="incheck" id="c_in02" value="자동차야영장"><label for="c_in02">자동차야영장</label></li>
									<li><input type="checkbox" name="incheck" id="c_in03" value="글램핑"><label for="c_in03">글램핑</label></li>
									<li><input type="checkbox" name="incheck" id="c_in04" value="카라반"><label for="c_in04">카라반</label></li>
								</ul>
						</div>
					</div>
				</li>
				<li>
					<div class="folder_w" style="display: inline-block;">
						<div class="check_w">
						<strong>바닥 형태 <input type='checkbox' name='bocheck' value='selectall4' onclick='boselectAll(this)'/></strong>
								<ul style="display: -webkit-inline-box; margin-left:0;">
									<li><input type="checkbox" name="bocheck" id="c_bo01" value="sitebottomcl1"><label for="c_bo01">잔디</label></li>
									<li><input type="checkbox" name="bocheck" id="c_bo02" value="sitebottomcl2"><label for="c_bo02">테크</label></li>
									<li><input type="checkbox" name="bocheck" id="c_bo03" value="sitebottomcl3"><label for="c_bo03">파쇄석</label></li>
									<li><input type="checkbox" name="bocheck" id="c_bo04" value="sitebottomcl4"><label for="c_bo04">자갈</label></li>
									<li><input type="checkbox" name="bocheck" id="c_bo05" value="sitebottomcl5"><label for="c_bo05">맨흙</label></li>
								</ul>
						</div>
					</div>
				</li>
				<li>
					<div class="folder_w" style="display: inline-block;">
						<div class="check_w">
						<strong>부대 시설 <input type='checkbox' name='sbcheck' value='selectall5' onclick='sbselectAll(this)'/></strong>
								<ul style="display: -webkit-inline-box;margin-left: 0; " ><li><input type="checkbox" name="sbcheck" id="c_sb01" value="전기"><label for="c_sb01">전기</label></li>
									<li><input type="checkbox" name="sbcheck" id="c_sb02" value="무선인터넷"><label for="c_sb02">무선인터넷</label></li>
									<li><input type="checkbox" name="sbcheck" id="c_sb03" value="장작판매"><label for="c_sb03">장작판매</label></li>
									<li><input type="checkbox" name="sbcheck" id="c_sb04" value="온수"><label for="c_sb04">온수</label></li>
									<li><input type="checkbox" name="sbcheck" id="c_sb05" value="마트.편의점"><label for="c_sb05">마트,편의점</label></li>
									<li><input type="checkbox" name="sbcheck" id="c_sb06" value="트렘폴린"><label for="c_sb06">트램펄린</label></li>
								</ul>
								<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
								<ul style="display: -webkit-inline-box;margin-left: 50px;">
									<li><input type="checkbox" name="sbcheck" id="c_sb07" value="물놀이장"><label for="c_sb07">물놀이장</label></li>
									<li><input type="checkbox" name="sbcheck" id="c_sb08" value="운동시설"><label for="c_sb08">운동시설</label></li>
									<li><input type="checkbox" name="sbcheck" id="c_sb09" value="산책로"><label for="c_sb09">산책로</label></li>
									<li><input type="checkbox" name="sbcheck" id="c_sb10" value="놀이터"><label for="c_sb10">놀이터</label></li>
									<li><input type="checkbox" name="sbcheck" id="c_sb11" value="운동장"><label for="c_sb11">운동장</label></li>
								</ul>
						</div>
					</div>
				</li>
				<li>
					<div class="folder_w" style="display: inline-block;">
						<div class="check_w">
						<strong>편의 시설 <input type='checkbox' name='facheck' value='selectall6' onclick='faselectAll(this)'/></strong>
								<ul style="display: -webkit-inline-box; margin-left:0;">
									<li><input type="checkbox" name="facheck" id="c_fa01" value="화장실"><label for="c_fa01">화장실</label></li>
									<li><input type="checkbox" name="facheck" id="c_fa02" value="샤워실"><label for="c_fa02">샤워실</label></li>
									<li><input type="checkbox" name="facheck" id="c_fa03" value="개수대"><label for="c_fa03">개수대</label></li>
								</ul>
						</div>
					</div>
				</li>
				<li>
					<div class="folder_w" style="display: inline-block;">
						<div class="check_w">
						<strong>사이트 간 거리(m) <input type='checkbox' name='sicheck' value='selectall7' onclick='siselectAll(this)'/></strong>
								<ul style="display: -webkit-inline-box; margin-left:0;">
									<li><input type="checkbox" name="sicheck" id="c_si01" value="1"><label for="c_si01">1</label></li>
									<li><input type="checkbox" name="sicheck" id="c_si02" value="2"><label for="c_si02">2</label></li>
									<li><input type="checkbox" name="sicheck" id="c_si03" value="3"><label for="c_si03">3</label></li>
									<li><input type="checkbox" name="sicheck" id="c_si04" value="4"><label for="c_si04">4</label></li>
									<li><input type="checkbox" name="sicheck" id="c_si05" value="5"><label for="c_si05">5</label></li>
									<li><input type="checkbox" name="sicheck" id="c_si06" value="6"><label for="c_si06">6</label></li>
									<li><input type="checkbox" name="sicheck" id="c_si07" value="7"><label for="c_si07">7</label></li>
									<li><input type="checkbox" name="sicheck" id="c_si08" value="8"><label for="c_si08">8</label></li>
									<li><input type="checkbox" name="sicheck" id="c_si09" value="9"><label for="c_si09">9</label></li>
									<li><input type="checkbox" name="sicheck" id="c_si10" value="10"><label for="c_si10">10</label></li>
									<li><input type="checkbox" name="sicheck" id="c_si11" value="13"><label for="c_si11">13</label></li>
								</ul>
						</div>
					</div>
				</li>
				</ul>
				
			<input type="hidden" name="Listx1" id="Listx1" value="123">
			<input type="hidden" name="Listx2" id="Listx2" value="123">
			<input type="hidden" name="Listx3" id="Listx3" value="123">
			<input type="hidden" name="Listx4" id="Listx4" value="123">
			<input type="hidden" name="Listx5" id="Listx5" value="123">
			<input type="hidden" name="Listx6" id="Listx6" value="123">
			<input type="hidden" name="Listx7" id="Listx7" value="123">
			</div>
			</form>
			<button style="display:none" name="submitbtn" id="subbtn" onclick="docheck()">검색</button>
			</div>
			
			
			<!-- modal -->
			<div class="modal">
	      <div class="modal-dialog modal-dialog-centered modal-lg">
					<div class="modal-content">
						<div class="modal-header" style="color:black;">오류 정정 리스트
							<button type="button" class="btn-close" data-bs-dismiss="modal"	aria-label="Close"></button>
						</div>
						<table  style="color:black;">
						<tbody>
						</tbody>
						</table>
						<div class="modal-body" align="center">
						</div>
					</div>
	   	 	</div>
	    </div>
    <script>
      const modal = document.querySelector('.modal');
      const btnOpenPopup = document.querySelector('.btn-open-popup');

      btnOpenPopup.addEventListener('click', () => {

  			modal.style.display = 'block';
  			$.ajax({
      		url : "error/correction/list",
      		type : "post",
      		async : false,
      		contentType : "application/x-www-form-urlencoded; charset=UTF-8;",
      		success : function(data) {
      			$('table>tbody').empty();
      			
      			var storeAdd1 = '<tr>'+
						'<th scope="col" style="width:15%">번호</th>'+
						'<th scope="col" style="width:45%">제목</th>'+
						'<th scope="col" style="width:15%">작성자</th>'+
						'<th scope="col" style="width:25%">작성 날짜</th>'+
						'</tr>';

	      		 $("table>tbody").append(storeAdd1);
						
						for(var i =0; i< data.data.length; i++){
	      				storeAdd = 
	      				'<tr class=errortr id='+data.data[i].enumber+' onclick="errorList()">'+
		 					 "<td>"+data.data[i].enumber+"</td>"+
		 					 "<td>"+data.data[i].etitle+"</td>"+
		 					 "<td>"+data.data[i].ewriter+"</td>"+
		 					 "<td>"+data.data[i].ewrite_date+"</td>"+
		 					 "</tr>";
		      		 $("table>tbody").append(storeAdd);
	      			}
      		}
      });
     });
    </script>
			</header>
			<th:block th:replace="fragment/mainfooter :: footerFragment"></th:block>
	</body>
<script th:inline="javascript">
	var role = ([[${session.user_role}]])
</script>
<style>
.swal2-modal{
    width:600px !important;
}
.swal2-title{
	margin-right:auto;
}
</style>
<script>
const closeBtn = modal.querySelector(".btn-close")
 
closeBtn.addEventListener("click", e => {
    modal.style.display = "none"
});

function errorList(){
	$('.errortr').click(function(){
    var id_check = $(this).attr("id");
		if(role == '1'){
	 	$.ajax({
  		url : "error/correction/one",
  		type : "post",
  		async : false,
  		data: {
  			"enumber":id_check
  		},
  		contentType : "application/x-www-form-urlencoded; charset=UTF-8;",
  		success : function(data) {
  			var html =
  				'<div style="text-align:right;"><span>'+data.data[0].ewriter+'</span>'+
  				'<span style="margin-left:10px;">'+data.data[0].ewrite_date+'</span></div>'+
  				'<div style="text-align: start;">'+data.data[0].econtent+'</div>';
  			(async () => {
  		  	const { value: formValues } = await Swal.fire({
  				 title: data.data[0].etitle,
  			   html: html,
  			   showCancelButton: true, // cancel버튼 보이기. 기본은 원래 없음
  			   confirmButtonColor: '#3085d6', // confrim 버튼 색깔 지정
  			   cancelButtonColor: '#d33', // cancel 버튼 색깔 지정
  			   confirmButtonText: '승인', // confirm 버튼 텍스트 지정
  			   cancelButtonText: '반려', // cancel 버튼 텍스트 지정
  			   reverseButtons: true, // 버튼 순서 거꾸로
  			 	})
  			  if (formValues) {
  			  	alert("success")
  			  }
  			  else {
  			  	alert("cancel")
  			  }
  		  })()
  		 }
  	})
	} else {
		 Swal.fire({
		   icon: 'error',
		   title: 'Oops...',
		   text: '관리자가 아닙니다!'
		 })
	}
	});
}




$(document).ready( function() {
  $( '#offDisplay' ).click( function() {
    $( '#searchform2' ).toggle(0);
    $( '#subbtn' ).toggle(0);
  });
});

function docheck() {
	if($("input:checkbox[name='docheck']").is(":checked") == true){
		$.when(chkappend()).then(function(x) {
			$("#searchform2").submit();
		});		
	}
	else {
		alert('지역을 선택해주세요!')
	}
}
function doselectAll(selectAll1)  {
  const checkboxes = document.getElementsByName('docheck');
  checkboxes.forEach((checkbox) => {
    checkbox.checked = selectAll1.checked;
  })
}
function lcselectAll(selectAll2)  {
  const checkboxes = document.getElementsByName('lccheck');
  checkboxes.forEach((checkbox) => {
    checkbox.checked = selectAll2.checked;
  })
}
function inselectAll(selectAll3)  {
  const checkboxes = document.getElementsByName('incheck');
  checkboxes.forEach((checkbox) => {
	 checkbox.checked = selectAll3.checked;
 })
}

 function sbselectAll(selectAll4)  {
  const checkboxes = document.getElementsByName('sbcheck');
  checkboxes.forEach((checkbox) => {
    checkbox.checked = selectAll4.checked;
  })
}
  function siselectAll(selectAll5)  {
    const checkboxes = document.getElementsByName('sicheck');
    checkboxes.forEach((checkbox) => {
      checkbox.checked = selectAll5.checked;
    })
  }
  function boselectAll(selectAll6)  {
    const checkboxes = document.getElementsByName('bocheck');
    checkboxes.forEach((checkbox) => {
      checkbox.checked = selectAll6.checked;
    })
  }
  function faselectAll(selectAll7)  {
    const checkboxes = document.getElementsByName('facheck');
    checkboxes.forEach((checkbox) => {
      checkbox.checked = selectAll7.checked;
    })
  }

function chkappend() {
	  var o = {};
		var doList = [];
		var lcList = [];
		var inList = [];
		var sbList = [];
		var siList = [];
		var boList = [];
		var faList = [];
		
		$("input[name='docheck']:checked").each(function(idx) {
			doList.push({"doid":$(this).val()});
		});
		$("input[name='lccheck']:checked").each(function(idx) {
			lcList.push({"lcid":$(this).val()});
		});
		$("input[name='incheck']:checked").each(function(idx) {
			inList.push({"inid":$(this).val()});
		});
		$("input[name='sbcheck']:checked").each(function(idx) {
			sbList.push({"sbid":$(this).val()});
		});
		$("input[name='sicheck']:checked").each(function(idx) {
			siList.push({"siid":$(this).val()});
		});
		$("input[name='bocheck']:checked").each(function(idx) {
			boList.push({"boid":$(this).val()});
		});
		$("input[name='facheck']:checked").each(function(idx) {
			faList.push({"faid":$(this).val()});
		});
		
		$('#Listx1').val(JSON.stringify(doList));
		$('#Listx2').val(JSON.stringify(lcList));
		$('#Listx3').val(JSON.stringify(inList));
		$('#Listx4').val(JSON.stringify(sbList));
		$('#Listx5').val(JSON.stringify(siList));
		$('#Listx6').val(JSON.stringify(faList));
		$('#Listx7').val(JSON.stringify(boList));
	}
	



</script>	

</html>





